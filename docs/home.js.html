<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: home.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: home.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// home.js

/** Global Variables */
let profileList = []; // store all profile object
let grid; // the html element which is the parent for all profile cards
let newProfileBtn; // the first element in the grid (the card with a "+" sign);
let infoModal; // the modal showing up when clicking a profile card
let newProfileModal; // the modal showing up when clicking the new-profile-btn
// add more below

window.addEventListener('DOMContentLoaded', init);

/**
 * Initialize page after load -- test change
 */
function init() {
  // select needed html elements
  grid = document.querySelector('#grid');
  newProfileBtn = document.querySelector("#new-profile-btn");
  infoModal = document.querySelector("#infoModal");
  newProfileModal = document.querySelector("#newProfileModal");

  // get existing profiles from localStorage
  // generate card component and display them
  let storedProfiles = getProfileFromStorage();
  if (storedProfiles) {
    profileList.push(...storedProfiles);
    addProfilesToDocument(storedProfiles);
  }

  // add more opeartions below

  // add event listeners below
  // handle when user click save-btn in new profile modal
  newProfileModal
    .querySelector("#createProfile")
    .addEventListener("click", createProfile);
}

/**
 * Construct a new Profile Object using the pass-in arguments
 * @constructor
 * @param {string} title - the name of the product
 * @param {string} tag - the tag of the product
 * @param {string} expDate - the expiration date of the product
 * @param {string} serialNum - the serial number of the product
 * @param {string} note - the additional notes for the product
 */
function Profile(title, tag, expDate, serialNum, note) {
  this.title = title;
  this.tag = tag;
  this.expDate = expDate;
  this.serialNum = serialNum;
  this.note = note;
}

/**
 * Retreat the existing profileList in localStorage.
 * Return the parsed array in which there are profile
 * object. If nothing in the localStorage, return nothing.
 * @returns {Profile[]} an array contains profile objects or nothing
 */
function getProfileFromStorage() {
  let profiles = localStorage.getItem("profiles");
  if (!profiles) return;
  return JSON.parse(profiles);
}

/**
 * save the profileList to the localStorage
 */
function saveProfileToStorage() {
  localStorage.setItem("profiles", JSON.stringify(profileList));
}

/**
 * Create bootstrap card component to display the
 * stored profileList in the localStorage
 * @param {Profile[]} profiles an array contains profile objects
 */
function addProfilesToDocument(profiles) {
  profiles.forEach((profile) => {
    let currCol = createCard(profile);
    grid.append(currCol);
  });
}

/**
 * Event handler for clicking the save btn in newProfileModal
 * 1. select needed html elements in newProfileModal
 * 2. create a new Profile object
 * 3. save the profile to localStorage
 * 4. create a card component on the main page
 * 5. clear input value in the newProfileModal
 */
function createProfile() {
  // select needed html elements in newProfileModal
  let title = newProfileModal.querySelector("#newProfileModal-title");
  let tag = newProfileModal.querySelector("#newProfileModal-tag"); // haven't implement yet
  let expDate = newProfileModal.querySelector("#newProfileModal-expDate");
  let serialNum = newProfileModal.querySelector("#newProfileModal-serialNum");
  let note = newProfileModal.querySelector("#newProfileModal-note");

  // create a new profile object
  let newProfile = new Profile(
    title.value,
    null,
    expDate.value,
    serialNum.value,
    note.value
  );

  // save newProfile to localStorage
  profileList = [newProfile, ...profileList];
  saveProfileToStorage();

  // create a card component to display
  let currCol = createCard(newProfile);
  grid.insertBefore(currCol, newProfileBtn.nextSibling);

  // clear input value of the form
  title.value = "";
  expDate.value = "";
  expDate.value = "";
  serialNum.value = "";
  note.value = "";
  // tag.value = "bedroom1";
}

/**
 * Create a bootstrap card component on the main page
 * 1. creat needed elements (refer to examples/profileCardTemplate.html)
 *    note that the card only contains a title and addition note for now, need to modify
 * 2. construct the card components using appendChild()
 * 3. add an event listener to the cardWrapper
 *    (when user clicks that card, the handler need to update
 *     infoModal to display the corresponding info)
 * 4. return the newly created cardWrapper
 * @param {Profile} profile -  an Profile object
 * @returns {HTMLDivElement} card wrapper
 */
function createCard(profile) {
  let cardWrapper = document.createElement("div");
  cardWrapper.setAttribute("class", "col-sm-6 col-lg-4 p-2");

  let card = document.createElement("div");
  card.setAttribute("type", "button");
  card.setAttribute("data-bs-toggle", "modal");
  card.setAttribute("data-bs-target", "#infoModal");
  card.setAttribute("class", "card");

  let cardBody = document.createElement("div");
  cardBody.setAttribute("class", "card-body");

  let cardTitle = document.createElement("h5");
  cardTitle.innerHTML = `${profile.title}`;
  cardTitle.setAttribute("class", "card-title");

  let cardText = document.createElement("p");
  cardText.setAttribute("class", "card-text");
  cardText.innerHTML = `${profile.note}`;

  // can add some btn or other needed elements here

  // construct the Card Components here
  cardBody.appendChild(cardTitle);
  cardBody.appendChild(cardText);
  card.appendChild(cardBody);
  cardWrapper.appendChild(card);

  // add a event listener to the component
  // when clicking, update the info modal with its info
  cardWrapper.addEventListener("click", () => {
    updateInfoModal(profile);
  });
  return cardWrapper;
}

/**
 * update infoModal with corresponding profile info
 * 1. hide all the input element (&lt;input>, &lt;textarea>)
 * 2. select the elements we need to update in the infoModal
 * 3. change its value (innerHTML) to the corresponding param
 *    in the passed-in profile object
 * 4. add event listener to the modify and delete button, which should
 *    change the displayed info to a input box so that user
 *    can modify them.
 *
 * @param {Profile} profile an Profile object
 */
function updateInfoModal(profile) {
  let title = document.querySelector("#infoModal-input-title");
  let tag = document.querySelector("#infoModal-input-tag"); // haven't implement yet
  let expDate = document.querySelector("#infoModal-input-expDate");
  let serialNum = document.querySelector("#infoModal-input-serialNum");
  let note = document.querySelector("#infoModal-input-note");

  title.value = profile.title;
  expDate.value = profile.expDate;
  serialNum.value = profile.serialNum;
  note.value = profile.note;
  // tag.value = profile.tag;
}

/**
 * Change the infoModal to editing mode. Change the corresponding
 * elements to &lt;input>&lt;/input> element; set the value of that input
 * with the corresponding profile.param
 *
 * 1. select the elements we need to update in the infoModal
 * 2. hide these elements
 * 3. show the input elements and update their value with profile.param
 * 4. add event listener to the save button and cancel button
 *    when clicking save or cancel btn, modal need to be changed back
 *    to the display mode (no input boxes)
 *
 * @param {Profile} profile an Profile object
 */
function changeInfoModalToEditMode(profile) {

}

/**
 * Change the infoModal to display mode. Remove/hide (depends on your
 * implementation) &lt;input> elements; create/display the non-input elements
 * (like &lt;p>&lt;/p> or others you choose to use)
 *
 * 1. select the input elements we need to update in the infoModal
 * 2. hide these elements
 * 3. show the non-input elements and update their value with profile.param
 * 4. add event listener to the modify button, which should
 *    change the displayed info to a input box so that user
 *    can modify them.
 * 5. add event listener to the delete button (should pop up a notification)
 *
 * @param {Profile} profile an Profile object
 */
function changeInfoModalToDisplayMode(profile) {}

/**
 * Delete the passed-in profile. Need to delete
 * the corresponding card component, profile object, etc.
 *
 * 1. remove the profile from profileList
 * 2. save the new profileList to localStorage
 * 3. remove corresponding card component
 *
 * @param {Profile} profile an Profile object
 */
function deleteProfile(profile) {}

/**
 * display all the cards with the same tag on main page
 *
 * 1. for each profile in profileList, check if it has
 *    such a tag. if it has, add this profile object to a
 *    temp list.
 * 2. remove all card components in grid
 * 3. call addProfilesToDocument(profiles) to display the
 *    profile we just added to the temp list
 *
 * @param {String} tag an tag
 */
function sortByTag(tag) {}

/**
 * Search the card by keyword. Display all the cards matching
 * that keyword (or sentence).
 *
 * 1. for each profile in profileList, check all the params if
 *    there are strings matches the keyword. If there is, add the
 *    profile to a temp list
 * 2. remove all card components in grid
 * 3. call addProfilesToDocument(profiles) to display the
 *    profile we just added to the temp list
 *
 * @param {String} keyWord a string
 */
function search(keyWord) {}

module.exports = {
  createProfile,
  createCard,
  updateInfoModal,
  changeInfoModalToDisplayMode,
  changeInfoModalToEditMode,
  deleteProfile,
  sortByTag,
  search,
  Profile
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Profile.html">Profile</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addProfilesToDocument">addProfilesToDocument</a></li><li><a href="global.html#changeInfoModalToDisplayMode">changeInfoModalToDisplayMode</a></li><li><a href="global.html#changeInfoModalToEditMode">changeInfoModalToEditMode</a></li><li><a href="global.html#createCard">createCard</a></li><li><a href="global.html#createProfile">createProfile</a></li><li><a href="global.html#deleteProfile">deleteProfile</a></li><li><a href="global.html#getProfileFromStorage">getProfileFromStorage</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#profileList">profileList</a></li><li><a href="global.html#saveProfileToStorage">saveProfileToStorage</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#sortByTag">sortByTag</a></li><li><a href="global.html#updateInfoModal">updateInfoModal</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Wed Nov 09 2022 05:19:57 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
